import { useState} from 'react';
import './App.css';
// –ò–º–ø–æ—Ä—Ç—ã –∫–∞—Ä—Ç–∏–Ω–æ–∫ —Ä–∞–º–æ–∫
import frameBalls from '/src/assets/balls.jpg';
import frameBox from '/src/assets/Box.jpeg';
import frameFirAndCones from './assets/FirAndCones.jpg';
// –ò–º–ø–æ—Ä—Ç—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
import FrameSelector from './components/FrameSelector/FrameSelector';
import CardText from './components/CardText/CardText';
import Preview from './components/Preview/Preview';
import WelcomeModal from './components/WelcomeModal/WelcomeModal';

// –¢–∏–ø—ã –¥–ª—è –Ω–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö
export type Frame = {
  id: number;
  name: string;
  url: string;
}

export type GreetingText = {
  id: number;
  text: string;
}

export type Addressee = {
  id: number;
  name: string;
  gender: 'male' | 'female' | 'plural'; // –î–æ–±–∞–≤–ª—è–µ–º —Ä–æ–¥
}



// –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–∫–ª–æ–Ω–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –ø–æ —Ä–æ–¥—É –∏ —á–∏—Å–ª—É —Å —É—á–µ—Ç–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
const adjustTextByGender = (text: string, gender: 'male' | 'female' | 'plural'): string => {
  // –°–ª–æ–≤–∞—Ä–∏ –¥–ª—è –∑–∞–º–µ–Ω —Å —É—á–µ—Ç–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
  const replacements = {
    male: {
      // –ü—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∏ –ø—Ä–∏—á–∞—Å—Ç–∏—è
      '—Å–∞–º\\(–∞\\)': '—Å–∞–º',
      '–ª—é–±–∏–º—ã–π\\(–∞—è\\)': '–ª—é–±–∏–º—ã–π',
      '–¥–æ—Ä–æ–≥–æ–π\\(–∞—è\\)': '–¥–æ—Ä–æ–≥–æ–π',
      '—É–≤–∞–∂–∞–µ–º—ã–π\\(–∞—è\\)': '—É–≤–∞–∂–∞–µ–º—ã–π',
      '–≥–æ—Ç–æ–≤\\(–∞\\)': '–≥–æ—Ç–æ–≤',
      '—É—Å–ø–µ–ª\\(–∞\\)': '—É—Å–ø–µ–ª',
      '—Å–∞–º—ã–π\\(–∞—è\\)': '—Å–∞–º—ã–π',
      '–ª—é–±–∏–º—ã–π\\(–∞—è\\) –Ω–∞—à\\(–∞\\)': '–ª—é–±–∏–º—ã–π –Ω–∞—à',
      
      // –°—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ
      '–º–æ–ª–æ–¥–µ—Ü': '–º–æ–ª–æ–¥–µ—Ü',
      '–≥–µ—Ä–æ–π': '–≥–µ—Ä–æ–π',
      
      // –ú–µ—Å—Ç–æ–∏–º–µ–Ω–∏—è
      '—Ç—ã': '—Ç—ã',
      '–¢—ã': '–¢—ã',
      '—Ç–≤–æ–π': '—Ç–≤–æ–π',
      '–¢–≤–æ–π': '–¢–≤–æ–π',
      '—Ç–µ–±–µ': '—Ç–µ–±–µ',
      '–¢–µ–±–µ': '–¢–µ–±–µ',
      '—Ç–æ–±–æ–π': '—Ç–æ–±–æ–π',
      '–¢–æ–±–æ–π': '–¢–æ–±–æ–π',
      '—Ç–æ–±–æ—é': '—Ç–æ–±–æ—é'
    },
    female: {
      '—Å–∞–º\\(–∞\\)': '—Å–∞–º–∞',
      '–ª—é–±–∏–º—ã–π\\(–∞—è\\)': '–ª—é–±–∏–º–∞—è',
      '–¥–æ—Ä–æ–≥–æ–π\\(–∞—è\\)': '–¥–æ—Ä–æ–≥–∞—è',
      '—É–≤–∞–∂–∞–µ–º—ã–π\\(–∞—è\\)': '—É–≤–∞–∂–∞–µ–º–∞—è',
      '–≥–æ—Ç–æ–≤\\(–∞\\)': '–≥–æ—Ç–æ–≤–∞',
      '—É—Å–ø–µ–ª\\(–∞\\)': '—É—Å–ø–µ–ª–∞',
      '—Å–∞–º—ã–π\\(–∞—è\\)': '—Å–∞–º–∞—è',
      '–ª—é–±–∏–º—ã–π\\(–∞—è\\) –Ω–∞—à\\(–∞\\)': '–ª—é–±–∏–º–∞—è –Ω–∞—à–∞',
      
      '–º–æ–ª–æ–¥–µ—Ü': '–º–æ–ª–æ–¥—á–∏–Ω–∞',
      '–≥–µ—Ä–æ–π': '–≥–µ—Ä–æ–∏–Ω—è',
      
      '—Ç—ã': '—Ç—ã',
      '–¢—ã': '–¢—ã',
      '—Ç–≤–æ–π': '—Ç–≤–æ—è',
      '–¢–≤–æ–π': '–¢–≤–æ—è',
      '—Ç–µ–±–µ': '—Ç–µ–±–µ',
      '–¢–µ–±–µ': '–¢–µ–±–µ',
      '—Ç–æ–±–æ–π': '—Ç–æ–±–æ–π',
      '–¢–æ–±–æ–π': '–¢–æ–±–æ–π',
      '—Ç–æ–±–æ—é': '—Ç–æ–±–æ—é'
    },
    plural: {
      '—Å–∞–º\\(–∞\\)': '—Å–∞–º–∏',
      '–ª—é–±–∏–º—ã–π\\(–∞—è\\)': '–ª—é–±–∏–º—ã–µ',
      '–¥–æ—Ä–æ–≥–æ–π\\(–∞—è\\)': '–¥–æ—Ä–æ–≥–∏–µ',
      '—É–≤–∞–∂–∞–µ–º—ã–π\\(–∞—è\\)': '—É–≤–∞–∂–∞–µ–º—ã–µ',
      '–≥–æ—Ç–æ–≤\\(–∞\\)': '–≥–æ—Ç–æ–≤—ã',
      '—É—Å–ø–µ–ª\\(–∞\\)': '—É—Å–ø–µ–ª–∏',
      '—Å–∞–º—ã–π\\(–∞—è\\)': '—Å–∞–º—ã–µ',
      '–ª—é–±–∏–º—ã–π\\(–∞—è\\) –Ω–∞—à\\(–∞\\)': '–ª—é–±–∏–º—ã–µ –Ω–∞—à–∏',
      
      '–º–æ–ª–æ–¥–µ—Ü': '–º–æ–ª–æ–¥—Ü—ã',
      '–≥–µ—Ä–æ–π': '–≥–µ—Ä–æ–∏',
      
      '—Ç—ã': '–≤—ã',
      '–¢—ã': '–í—ã',
      '—Ç–≤–æ–π': '–≤–∞—à',
      '–¢–≤–æ–π': '–í–∞—à',
      '—Ç–µ–±–µ': '–≤–∞–º',
      '–¢–µ–±–µ': '–í–∞–º',
      '—Ç–æ–±–æ–π': '–≤–∞–º–∏',
      '–¢–æ–±–æ–π': '–í–∞–º–∏',
      '—Ç–æ–±–æ—é': '–≤–∞–º–∏'
    }
  };

  const genderReplacements = replacements[gender];
  let result = text;

  // –ü—Ä–∏–º–µ–Ω—è–µ–º –∑–∞–º–µ–Ω—ã –≤ –ø–æ—Ä—è–¥–∫–µ –æ—Ç —Å–∞–º—ã—Ö –¥–ª–∏–Ω–Ω—ã—Ö –∫ —Å–∞–º—ã–º –∫–æ—Ä–æ—Ç–∫–∏–º
  Object.entries(genderReplacements)
    .sort(([a], [b]) => b.length - a.length)
    .forEach(([pattern, replacement]) => {
      const regex = new RegExp(pattern, 'g');
      result = result.replace(regex, replacement);
    });

  // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –∑–∞–º–µ–Ω—ã –¥–ª—è –≥–ª–∞–≥–æ–ª–æ–≤ –∏ –¥—Ä—É–≥–∏—Ö —á–∞—Å—Ç–µ–π —Ä–µ—á–∏
  if (gender === 'plural') {
    result = result
      // –ì–ª–∞–≥–æ–ª—ã
      .replace(/\b—Å–¥–µ–ª–∞–π\b/g, '—Å–¥–µ–ª–∞–π—Ç–µ')
      .replace(/\b–°–¥–µ–ª–∞–π\b/g, '–°–¥–µ–ª–∞–π—Ç–µ')
      .replace(/\b–±—É–¥—å\b/g, '–±—É–¥—å—Ç–µ')
      .replace(/\b–ë—É–¥—å\b/g, '–ë—É–¥—å—Ç–µ')
      .replace(/\b–ø–æ—Å–º–æ—Ç—Ä–∏\b/g, '–ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ')
      .replace(/\b–ü–æ—Å–º–æ—Ç—Ä–∏\b/g, '–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ')
      .replace(/\b–∑–∞–∫—Ä—É—Ç–∏–º\b/g, '–∑–∞–∫—Ä—É—Ç–∏–º')
      .replace(/\b–±—É–¥–µ—Ç\b/g, '–±—É–¥–µ—Ç')
      
      // –ü—Ä–∏—Ç—è–∂–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Å—Ç–æ–∏–º–µ–Ω–∏—è –∏ –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã–µ
      .replace(/\b—Ç–≤–æ–∏\b/g, '–≤–∞—à–∏')
      .replace(/\b–¢–≤–æ–∏\b/g, '–í–∞—à–∏')
      .replace(/\b—Ç–≤–æ–∏—Ö\b/g, '–≤–∞—à–∏—Ö')
      .replace(/\b–¢–≤–æ–∏—Ö\b/g, '–í–∞—à–∏—Ö')
      .replace(/\b—Ç–≤–æ–∏–º\b/g, '–≤–∞—à–∏–º')
      .replace(/\b–¢–≤–æ–∏–º\b/g, '–í–∞—à–∏–º')
      .replace(/\b—Ç–≤–æ–∏–º–∏\b/g, '–≤–∞—à–∏–º–∏')
      .replace(/\b–¢–≤–æ–∏–º–∏\b/g, '–í–∞—à–∏–º–∏')
      
      // –õ–∏—á–Ω—ã–µ –º–µ—Å—Ç–æ–∏–º–µ–Ω–∏—è
      .replace(/\b—Ç–µ–±—è\b/g, '–≤–∞—Å')
      .replace(/\b–¢–µ–±—è\b/g, '–í–∞—Å')
      .replace(/\b—Ç–æ–±–æ–π\b/g, '–≤–∞–º–∏')
      .replace(/\b–¢–æ–±–æ–π\b/g, '–í–∞–º–∏')
      
      // –í–æ–∑–≤—Ä–∞—Ç–Ω—ã–µ –º–µ—Å—Ç–æ–∏–º–µ–Ω–∏—è
      .replace(/\b—Å–µ–±—è\b/g, '—Å–µ–±—è')
      .replace(/\b—Å–æ–±–æ–π\b/g, '—Å–æ–±–æ–π')
      
      // –ü—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã–µ –≤ —Ä–æ–¥–∏—Ç–µ–ª—å–Ω–æ–º –ø–∞–¥–µ–∂–µ
      .replace(/\b—Ç–≤–æ–µ–≥–æ\b/g, '–≤–∞—à–µ–≥–æ')
      .replace(/\b–¢–≤–æ–µ–≥–æ\b/g, '–í–∞—à–µ–≥–æ')
      .replace(/\b—Ç–≤–æ–µ–π\b/g, '–≤–∞—à–µ–π')
      .replace(/\b–¢–≤–æ–µ–π\b/g, '–í–∞—à–µ–π')
      
      // –ì–ª–∞–≥–æ–ª—ã –ø—Ä–æ—à–µ–¥—à–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
      .replace(/\b—Å–±—ã–ª—Å—è\b/g, '—Å–±—ã–ª–∏—Å—å')
      .replace(/\b—Å—Ç–∞–ª\b/g, '—Å—Ç–∞–ª–∏')
      .replace(/\b–±—ã–ª\b/g, '–±—ã–ª–∏')
      .replace(/\b–ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª\b/g, '–ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∏')
      
      // –°—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ
      .replace(/\b–≥–æ–¥\b/g, '–≥–æ–¥')
      .replace(/\b–ø–ª–∞–Ω\b/g, '–ø–ª–∞–Ω—ã')
      .replace(/\b–ø—Ä–æ–µ–∫—Ç\b/g, '–ø—Ä–æ–µ–∫—Ç—ã')
      .replace(/\b–ø–æ–¥–∞—Ä–æ–∫\b/g, '–ø–æ–¥–∞—Ä–∫–∏')
      .replace(/\b–ø—É—Ç—å\b/g, '–ø—É—Ç–∏')
      .replace(/\b—É—Å–ø–µ—Ö\b/g, '—É—Å–ø–µ—Ö–∏');
  } else if (gender === 'female') {
    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–º–µ–Ω—ã –¥–ª—è –∂–µ–Ω—Å–∫–æ–≥–æ —Ä–æ–¥–∞
    result = result
      .replace(/\b—Å–±—ã–ª—Å—è\b/g, '—Å–±—ã–ª–∞—Å—å')
      .replace(/\b—Å—Ç–∞–ª\b/g, '—Å—Ç–∞–ª–∞')
      .replace(/\b–±—ã–ª\b/g, '–±—ã–ª–∞')
      .replace(/\b–ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª\b/g, '–ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∞');
  }

  return result;
};

function App() {
  // –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
  const [showWelcomeModal, setShowWelcomeModal] = useState(true);

  // –î–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞–º–æ–∫
  const frames: Frame[] = [
    { id: 1, name: '–ù–æ–≤–æ–≥–æ–¥–Ω–∏–µ —à–∞—Ä–∏–∫–∏', url: frameBalls },
    { id: 2, name: '–ü–æ–¥–∞—Ä–æ—á–Ω—ã–µ –∫–æ—Ä–æ–±–∫–∏', url: frameBox },
    { id: 3, name: '–ï–ª–æ–≤—ã–µ –≤–µ—Ç–∫–∏', url: frameFirAndCones },
  ];

  // –î–∞–Ω–Ω—ã–µ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤ (–æ–±–Ω–æ–≤–ª–µ–Ω—ã —Å —É—á–µ—Ç–æ–º —Å–∫–ª–æ–Ω–µ–Ω–∏—è)
  const greetingTexts: GreetingText[] = [
    { id: 1, text: '[–ê–¥—Ä–µ—Å–∞—Ç]! –û—Ç –≤—Å–µ–≥–æ —Å–µ—Ä–¥—Ü–∞ –∂–µ–ª–∞—é, —á—Ç–æ–±—ã –≤ –Ω–∞—Å—Ç—É–ø–∞—é—â–µ–º –≥–æ–¥—É –Ω–∞—à–∏ —Ä–∞–±–æ—á–∏–µ –ø–ª–∞–Ω—ã –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å–±—ã–≤–∞–ª–∏—Å—å, –∞ –≤–∑—Ä—ã–≤–∞–ª–∏ –≤—Å–µ –≥—Ä–∞—Ñ–∏–∫–∏ —Å–≤–æ–µ–π –≥—Ä–∞–Ω–¥–∏–æ–∑–Ω–æ—Å—Ç—å—é! –ü—É—Å—Ç—å –ø—Ä–æ–µ–∫—Ç—ã –±—É–¥—É—Ç —É—Å–ø–µ—à–Ω—ã–º–∏, –∞ –∫–æ—Ñ–µ ‚Äî –∫—Ä–µ–ø–∫–∏–º. –ß—Ç–æ–±—ã –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ –Ω–µ –∫–æ–Ω—á–∞–ª–æ—Å—å, –∞ —Ä–∞–±–æ—á–∏–π –∞–∑–∞—Ä—Ç —Ç–æ–ª—å–∫–æ –Ω–∞—Ä–∞—Å—Ç–∞–ª. –° –ù–æ–≤—ã–º –≥–æ–¥–æ–º! –ü—É—Å—Ç—å –æ–Ω –±—É–¥–µ—Ç –ø–ª–æ–¥–æ—Ç–≤–æ—Ä–Ω—ã–º –∏ —â–µ–¥—Ä—ã–º –Ω–∞ –ø–æ–±–µ–¥—ã!' },
    { id: 2, text: '[–ê–¥—Ä–µ—Å–∞—Ç]! –ü—É—Å—Ç—å –≤ –Ω–æ–≤–æ–º –≥–æ–¥—É —Å–±—É–¥—É—Ç—Å—è –Ω–µ —Ç–æ–ª—å–∫–æ —Ç–≤–æ–∏ —Å–∞–º—ã–µ —Å–º–µ–ª—ã–µ –º–µ—á—Ç—ã, –Ω–æ –∏ —Ç–µ –∂–µ–ª–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ —Ç—ã –µ—â–µ —Å–∞–º(–∞) –Ω–µ —É—Å–ø–µ–ª(–∞) –∑–∞–≥–∞–¥–∞—Ç—å! –ñ–µ–ª–∞—é –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π, –≤–µ—Ä–Ω—ã—Ö –ª—é–¥–µ–π —Ä—è–¥–æ–º –∏ –º–æ—Ä–µ –ø–æ–≤–æ–¥–æ–≤ –¥–ª—è –∏—Å–∫—Ä–µ–Ω–Ω–µ–≥–æ —Å–º–µ—Ö–∞. –°–ø–∞—Å–∏–±–æ, —á—Ç–æ —Ç—ã –µ—Å—Ç—å! –î–∞–≤–∞–π –∑–∞–∫—Ä—É—Ç–∏–º —ç—Ç–æ—Ç –≥–æ–¥ –≤–º–µ—Å—Ç–µ ‚Äî –±—É–¥–µ—Ç –∂–∞—Ä–∫–æ!' },
    { id: 3, text: '[–ê–¥—Ä–µ—Å–∞—Ç], –ª—é–±–∏–º—ã–π(–∞—è) –Ω–∞—à(–∞)! –ü–æ–¥ –±–æ–π –∫—É—Ä–∞–Ω—Ç–æ–≤ —è –∑–∞–≥–∞–¥—ã–≤–∞—é –æ–¥–Ω–æ, –Ω–æ —Å–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ –∂–µ–ª–∞–Ω–∏–µ ‚Äî —á—Ç–æ–±—ã –∫–∞–∂–¥—ã–π –Ω–∞—à —Å–ª–µ–¥—É—é—â–∏–π –≥–æ–¥ –±—ã–ª —Ç–∞–∫ –∂–µ –Ω–∞–ø–æ–ª–Ω–µ–Ω —Å—á–∞—Å—Ç—å–µ–º, –∫–∞–∫ –∏ —ç—Ç–æ—Ç. –ü—É—Å—Ç—å –Ω–∞—à–∞ –ª—é–±–æ–≤—å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫—Ä–µ–ø—á–µ, –æ–±—â–∏–µ –º–µ—á—Ç—ã ‚Äî –≥—Ä–∞–Ω–¥–∏–æ–∑–Ω–µ–µ, –∞ —Å–æ–≤–º–µ—Å—Ç–Ω—ã–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è ‚Äî —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–µ–µ. –° –ù–æ–≤—ã–º –≥–æ–¥–æ–º, –º–æ–µ —Å–æ–ª–Ω—Ü–µ! –¢—ã ‚Äî –º–æ–µ –ª—É—á—à–µ–µ —á—É–¥–æ.' },
    { id: 4, text: '[–ê–¥—Ä–µ—Å–∞—Ç]! –ü—É—Å—Ç—å —ç—Ç–æ—Ç –Ω–æ–≤—ã–π –≥–æ–¥ —Å—Ç–∞–Ω–µ—Ç –¥–ª—è –≤–∞—Å —á–∏—Å—Ç—ã–º –ª–∏—Å—Ç–æ–º, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –≤—ã –Ω–∞—Ä–∏—Å—É–µ—Ç–µ —Å–∞–º—ã–µ —è—Ä–∫–∏–µ –∫–∞—Ä—Ç–∏–Ω—ã —Å–≤–æ–µ–π –∂–∏–∑–Ω–∏! –ñ–µ–ª–∞—é –∫—Ä—É—Ç—ã—Ö –≤–∑–ª–µ—Ç–æ–≤, –º—è–≥–∫–∏—Ö –ø–æ—Å–∞–¥–æ–∫, –≤–µ—Ä–Ω—ã—Ö –ø–æ–ø—É—Ç—á–∏–∫–æ–≤ –∏ –±–∞–≥–∞–∂–∞ –∏–∑ –Ω–µ–∑–∞–±—ã–≤–∞–µ–º—ã—Ö –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–π. –ü—É—Å—Ç—å —Å–±—ã–≤–∞–µ—Ç—Å—è –≤—Å—ë, –≤–æ —á—Ç–æ –≤—ã –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É –≤–µ—Ä–∏—Ç–µ! –° –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–º!' },
    { id: 5, text: '[–ê–¥—Ä–µ—Å–∞—Ç]! –ü—É—Å—Ç—å –Ω–æ–≤—ã–π –≥–æ–¥ —Å—Ç–∞–Ω–µ—Ç –¥–ª—è —Ç–µ–±—è –≤—Ä–µ–º–µ–Ω–µ–º —É–¥–∏–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –æ—Ç–∫—Ä—ã—Ç–∏–π ‚Äî –∫–∞–∫ –≤ –º–∏—Ä–µ, —Ç–∞–∫ –∏ –≤ —Å–µ–±–µ —Å–∞–º–æ–º! –ñ–µ–ª–∞—é —Å–º–µ–ª–æ—Å—Ç–∏ –æ—Ç–ø—É—Å—Ç–∏—Ç—å —Ç–æ, —á—Ç–æ –ø–æ—Ä–∞, –∏ –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å —Ç–æ, —á—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∑–∞—Å–ª—É–∂–∏–≤–∞–µ—à—å. –ü—É—Å—Ç—å –Ω–æ–≤—ã–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç—ã –º–∞–Ω—è—Ç, –∞ –¥–æ—Ä–æ–≥–∞ –±—É–¥–µ—Ç –ª–µ–≥–∫–æ–π –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–π. –í–ø–µ—Ä–µ–¥, –∫ –Ω–æ–≤—ã–º —Å–≤–µ—Ä—à–µ–Ω–∏—è–º!' },
    { id: 6, text: '[–ê–¥—Ä–µ—Å–∞—Ç]! –ñ–µ–ª–∞—é, —á—Ç–æ–±—ã –≤ –Ω–æ–≤–æ–º –≥–æ–¥—É –º—É–∑–∞ –±—ã–ª–∞ —Ç–≤–æ–µ–π –≤–µ—Ä–Ω–æ–π —Å–ø—É—Ç–Ω–∏—Ü–µ–π, –∞ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ –±–∏–ª–æ —á–µ—Ä–µ–∑ –∫—Ä–∞–π! –ü—É—Å—Ç—å —Ç–≤–æ–∏ –∏–¥–µ–∏ –Ω–∞—Ö–æ–¥—è—Ç —Å–∞–º—ã–π —Ç–µ–ø–ª—ã–π –æ—Ç–∫–ª–∏–∫, –∞ –ø—Ä–æ–µ–∫—Ç—ã –ø—Ä–∏–Ω–æ—Å—è—Ç –Ω–µ —Ç–æ–ª—å–∫–æ —Ç–≤–æ—Ä—á–µ—Å–∫–æ–µ, –Ω–æ –∏ –º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω–æ–µ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–∏–µ. –¢–≤–æ—Ä–∏, –≤—ã–¥—É–º—ã–≤–∞–π, –ø—Ä–æ–±—É–π! –° –ù–æ–≤—ã–º –≥–æ–¥–æ–º, –ø–æ–ª–Ω—ã–º –Ω–æ–≤—ã—Ö —à–µ–¥–µ–≤—Ä–æ–≤!' },
    { id: 7, text: '[–ê–¥—Ä–µ—Å–∞—Ç]! –ü—É—Å—Ç—å –Ω–æ–≤—ã–π –≥–æ–¥ –ø—Ä–∏–Ω–µ—Å–µ—Ç —Å —Å–æ–±–æ–π –º–æ—Ä–µ —Å—á–∞—Å—Ç–ª–∏–≤—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤, —É—é—Ç–Ω—ã—Ö –≤–µ—á–µ—Ä–æ–≤, –∏—Å–∫—Ä–µ–Ω–Ω–∏—Ö —É–ª—ã–±–æ–∫ –∏ –≤–µ—Ä–Ω—ã—Ö –¥—Ä—É–∑–µ–π. –ñ–µ–ª–∞—é, —á—Ç–æ–±—ã –∫–∞–∂–¥–æ–µ —É—Ç—Ä–æ –Ω–∞—á–∏–Ω–∞–ª–æ—Å—å —Å —Ö–æ—Ä–æ—à–µ–π –Ω–æ–≤–æ—Å—Ç–∏, –∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –∑–∞–∫–∞–Ω—á–∏–≤–∞–ª—Å—è —Å –æ—â—É—â–µ–Ω–∏–µ–º —Å—á–∞—Å—Ç—å—è. –° –ù–æ–≤—ã–º –≥–æ–¥–æ–º! –ü—É—Å—Ç—å –≤—Å–µ –º–µ—á—Ç—ã —Å–±—ã–≤–∞—é—Ç—Å—è!' },
  ];

  // –î–∞–Ω–Ω—ã–µ –¥–ª—è –∞–¥—Ä–µ—Å–∞—Ç–æ–≤ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Ä–æ–¥–∞
  const addressees: Addressee[] = [
    { id: 1, name: '–î–æ—Ä–æ–≥–æ–π –±—Ä–∞—Ç', gender: 'male' },
    { id: 2, name: '–î–æ—Ä–æ–≥–∞—è —Å–µ—Å—Ç—Ä–∞', gender: 'female' },
    { id: 3, name: '–î–æ—Ä–æ–≥–æ–π –¥—Ä—É–≥', gender: 'male' },
    { id: 4, name: '–î–æ—Ä–æ–≥–∞—è –ø–æ–¥—Ä—É–≥–∞', gender: 'female' },
    { id: 5, name: '–ú–æ–π –ª—é–±–∏–º—ã–π', gender: 'male' },
    { id: 6, name: '–ú–æ—è –ª—é–±–∏–º–∞—è', gender: 'female' },
    { id: 7, name: '–î–æ—Ä–æ–≥–∞—è –±–∞–±—É—à–∫–∞', gender: 'female' },
    { id: 8, name: '–î–æ—Ä–æ–≥–æ–π –¥–µ–¥—É—à–∫–∞', gender: 'male' },
    { id: 9, name: '–î–æ—Ä–æ–≥–∞—è –º–∞–º–∞', gender: 'female' },
    { id: 10, name: '–î–æ—Ä–æ–≥–æ–π –ø–∞–ø–∞', gender: 'male' },
  ];

  // –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  const [selectedFrame, setSelectedFrame] = useState<Frame | null>(null);
  const [selectedText, setSelectedText] = useState<GreetingText | null>(null);
  const [selectedAddressee, setSelectedAddressee] = useState<Addressee | null>(null);

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ —Å —É—á–µ—Ç–æ–º —Ä–æ–¥–∞
  const getAdjustedText = (text: string, addressee: Addressee | null): string => {
    if (!addressee) return text.replace('[–ê–¥—Ä–µ—Å–∞—Ç]', '...');
    
    const baseText = text.replace('[–ê–¥—Ä–µ—Å–∞—Ç]', addressee.name);
    return adjustTextByGender(baseText, addressee.gender);
  };

  return (
    <div className="app">
      {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è */}
      <WelcomeModal 
        isOpen={showWelcomeModal} 
        onClose={() => setShowWelcomeModal(false)} 
      />
      
      <header className="app-header">
        <h1>üéÖ –ú–∞—Å—Ç–µ—Ä—Å–∫–∞—è –ù–æ–≤–æ–≥–æ–¥–Ω–∏—Ö –û—Ç–∫—Ä—ã—Ç–æ–∫ üéÑ</h1>
        <p className="app-subtitle">–°–æ–∑–¥–∞–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—É—é –æ—Ç–∫—Ä—ã—Ç–∫—É –¥–ª—è –≤–∞—à–∏—Ö –±–ª–∏–∑–∫–∏—Ö!</p>
      </header>
      
      <div className="app-steps">
        <section className="frame-selection">
          <h2>üé® –®–∞–≥ 1: –í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–º–∫—É</h2>
          <FrameSelector 
            frames={frames} 
            selectedFrame={selectedFrame} 
            onSelectFrame={setSelectedFrame} 
          />
        </section>

        <section className="text-selection">
          <h2>üìù –®–∞–≥ 2: –í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–∫—Å—Ç –∏ –∞–¥—Ä–µ—Å–∞—Ç–∞</h2>
          <CardText 
            greetingTexts={greetingTexts}
            addressees={addressees}
            selectedText={selectedText}
            selectedAddressee={selectedAddressee}
            onSelectText={setSelectedText}
            onSelectAddressee={setSelectedAddressee}
            getAdjustedText={getAdjustedText} // –ü–µ—Ä–µ–¥–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
          />
        </section>

        <section className="preview-section">
          <h2>üëÄ –®–∞–≥ 3: –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ</h2>
          <Preview 
            selectedFrame={selectedFrame}
            selectedText={selectedText}
            selectedAddressee={selectedAddressee}
            getAdjustedText={getAdjustedText} // –ü–µ—Ä–µ–¥–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
          />
        </section>
      </div>
    </div>
  );
}

export default App;